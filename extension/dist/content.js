const i="oubprrmcbyresbexpbuq",s=`sb-${i}-auth-token`;function o(){const t=window.location.pathname,e=window.location.search;return t.includes("/auth/logout")||e.includes("clear=true")||e.includes("logout=true")}function n(t){try{if(typeof chrome>"u"||!chrome.runtime||!chrome.runtime.id)return;chrome.runtime.sendMessage(t).catch(()=>{})}catch{}}function c(){if(o()){console.log("[SquareFt] On logout page, skipping auth sync");return}try{const t=localStorage.getItem(s);if(t){const e=JSON.parse(t);e!=null&&e.access_token&&(e!=null&&e.refresh_token)&&n({type:"SYNC_AUTH_FROM_DASHBOARD",accessToken:e.access_token,refreshToken:e.refresh_token,expiresAt:e.expires_at})}}catch{}}function r(){o()&&(console.log("[SquareFt] Logout page detected, notifying extension"),n({type:"DASHBOARD_LOGOUT"}))}r();o()||c();window.addEventListener("storage",t=>{t.key===s&&(t.newValue&&!o()?c():t.newValue||n({type:"DASHBOARD_LOGOUT"}))});o()||setTimeout(c,1e3);
